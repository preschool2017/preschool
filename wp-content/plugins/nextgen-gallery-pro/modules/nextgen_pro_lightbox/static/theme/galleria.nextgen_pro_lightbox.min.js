!function(e){var n=setInterval(function(){"undefined"!=typeof window.Galleria&&(clearInterval(n),t())},10),t=function(){Galleria.addTheme({name:"nextgen_pro_lightbox",author:"Imagely",version:2,defaults:{debug:!1,responsive:!0,carousel:!0,thumbnails:!0,fullscreen:!1,trueFullscreen:!1,fullscreenDoubleTap:!1,maxScaleRatio:1},init:function(n){var t=this;Galleria.requires(1.41,"This version of the NextGEN Pro Lightbox theme requires Galleria 1.4.1 or later");var a={sidebar:{_is_open:!1,_type:"",is_open:function(e){return"undefined"==typeof e?this._is_open:void(this._is_open=e)},toggle:function(e){this.is_open()&&e==this.get_type()?this.close():this.open(e)},open:function(n){t.$("sidebar-overlay").addClass("npl-sidebar-overlay-open"),t.$("container").addClass("npl-sidebar-open"),e("#npl_button_close").addClass("npl-sidebar-open"),this.render(n),a.sidebar.is_open(!0);var i=e.nplModal("get_state");i.sidebar=n,e.nplModal("router.navigate",e.nplModal("get_setting","router_slug")+"/"+i.slug+"/"+i.image_id+"/"+n,!0),e(window).trigger("resize"),t.trigger("npl.sidebar.opened")},close:function(){t.$("sidebar-overlay").removeClass("npl-sidebar-overlay-open"),t.$("container").removeClass("npl-sidebar-open"),e("#npl_button_close").removeClass("npl-sidebar-open"),a.sidebar.is_open(!1);var n=e.nplModal("get_state");n.sidebar=null,e.nplModal("router.navigate",e.nplModal("get_setting","router_slug")+"/"+n.slug+"/"+n.image_id,!0),e(window).trigger("resize"),t.trigger("npl.sidebar.closed")},render:function(n){n!=this.get_type()&&(this._type=n,e.nplModal("get_state").sidebar=n),a.sidebars[n].render(a.galleria.get_current_image_id()),a.sidebars[n].init()},get_type:function(){return this._type},events:{bind:function(){t.bind("npl.init",this.npl_init),t.bind("npl.init.complete",this.npl_init_complete),t.bind("npl.sidebar.rendered",this.rendered)},npl_init:function(){t.addElement("sidebar-container"),t.addElement("sidebar-overlay"),t.addElement("sidebar-spinner"),t.addElement("sidebar-toggle"),t.$("sidebar-container").css({background:e.nplModal("get_setting","sidebar_background_color")}),t.$("sidebar-toggle").css({color:a.icons.get_overlay_color()});var n=e("<i/>").addClass("fa fa-spin fa-spinner");e(t._dom.stage).append(n),t.append({"sidebar-spinner":n});var i=e("<i/>").addClass("fa fa-arrow-circle-right").click(function(e){e.preventDefault(),a.sidebar.close()});e(t._dom.stage).append(i),t.append({"sidebar-toggle":i})},npl_init_complete:function(){t.appendChild("container","sidebar-container"),t.appendChild("container","sidebar-overlay"),t.appendChild("sidebar-overlay","sidebar-spinner"),t.appendChild("container","sidebar-toggle")},rendered:function(){e("#nggpl-sidebar-thumbnail-img").attr("src",t.getData(t.getIndex()).image)}}},sidebars:{comments:{_cache:[],get_cache_size:function(){return e.map(this._cache,function(e,n){return e}).length},get_prev_uncached_image_id:function(e){var n=t.getData(t.getPrev(a.galleria.get_index_from_id(e))).image_id;return this._cache[n]&&this.get_cache_size()<t.getDataLength()?this.get_prev_uncached_image_id(n):n},get_next_uncached_image_id:function(e){var n=t.getData(t.getNext(a.galleria.get_index_from_id(e))).image_id;return this._cache[n]&&this.get_cache_size()<t.getDataLength()?this.get_next_uncached_image_id(n):n},expanded_request:function(n,t){var i=n instanceof Array?n:n.toString().split(",");if(1==i.length){var a=i[0],o=this.get_prev_uncached_image_id(a),l=this.get_next_uncached_image_id(a);this._cache[o]||i.unshift(o),this._cache[l]||o==l||n==l||i.push(l)}i=e.unique(i),this.request(i,0,t)},request:function(n,t,i){var a=this,o={action:"get_comments",type:"image",page:t,id:n.join(","),from:window.parent.location.toString()};e.nplModal("get_setting","lang",!1)&&(o.lang=e.nplModal("get_setting","lang")),e.post(photocrati_ajax.url,o,function(e){"object"!=typeof e&&(e=JSON.parse(e));for(var n in e.responses)a._cache[n]=e.responses[n];"function"==typeof i&&i(e)})},load_more:function(n){if(a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_comments",!1)){var t=[],i=this.get_prev_uncached_image_id(n),o=this.get_next_uncached_image_id(n);this._cache[i]||t.push(i),this._cache[o]||t.push(o),0!=e.unique(t).length&&this.expanded_request(e.unique(t))}},init:function(){1==e("#nggpl-comments-wrapper").length&&(document.getElementById("ngg_comment_origin_url").value=window.location.href,t.$("sidebar-container").find("a").each(function(){"nggpl-comment-logout"==e(this).attr("id")?e(this).attr("href",e(this).attr("href")+"?redirect_to="+window.location.toString()):e(this).attr("target","_blank")}),e("#nggpl-respond-form").bind("submit",function(n){n.preventDefault();var i=e("#nggpl-comment-status");t.$("sidebar-overlay").addClass("npl-sidebar-overlay-open"),e.ajax({type:e(this).attr("method"),url:e(this).attr("action"),data:e(this).serialize(),dataType:"json",success:function(n,o){if(1==n.success){e("#nggpl-comment").val(""),e("#nggpl-comments-title").val("");var l=a.galleria.get_current_image_id();a.sidebars.comments.expanded_request(l,function(e){a.sidebar.render(a.sidebars.comments.get_type(),l)})}else i.addClass("error").html(n),t.$("sidebar-overlay").removeClass("npl-sidebar-overlay-open")},complete:function(e,n){},error:function(e,n,a){i.addClass("error").html(e.responseText),t.$("sidebar-overlay").removeClass("npl-sidebar-overlay-open")}})}),e(".galleria-sidebar-container .nggpl-button, #nggpl-comment-form-wrapper input[type='submit']").each(function(){var n=e(this);n.css({color:e.nplModal("get_setting","sidebar_button_color"),"background-color":e.nplModal("get_setting","sidebar_button_background")})}),e(".nggpl-reply-to-comment").bind("click",function(n){n.preventDefault(),e("#nggpl-comment_parent").val(e(this).data("comment-id")),e("#nggpl-comment-reply-status").removeClass("hidden"),e("#nggpl-commentform").find(":input").filter(":visible:first").focus(),e("#nggpl-comments").velocity({scrollTop:e("#nggpl-comments-bottom").offset().top},"slow")}),e("#nggpl-comment-reply-status a").bind("click",function(n){n.preventDefault(),e("#nggpl-comment_parent").val("0"),e("#nggpl-comment-reply-status").addClass("hidden")}),e("#nggpl-comment-nav-below a").bind("click",function(n){n.preventDefault(),t.$("sidebar-overlay").addClass("npl-sidebar-overlay-open");var i=e(this).data("page-id");a.sidebars.comments.request([a.galleria.get_current_image_id()],i,function(){a.sidebar.render("comments",a.galleria.get_current_image_id())})}),t.trigger("npl.sidebar.rendered"),a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_sharing",!1)&&(e("#nggpl-comments-image-share-icons").removeClass("disabled"),a.share_icons.create("#nggpl-comments-image-share-icons",a.icons.get_overlay_color())))},render:function(e){e=e||t.getData(t.getIndex()).image_id;var n=this._cache;this._cache[e]?(t.$("sidebar-container").html(n[e].rendered_view),t.$("sidebar-overlay").removeClass("npl-sidebar-overlay-open")):this.expanded_request(e,function(i){t.$("sidebar-container").html(n[e].rendered_view),a.sidebars.comments.init(),t.$("sidebar-overlay").removeClass("npl-sidebar-overlay-open")})},get_type:function(){return"comments"},events:{bind:function(){a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_comments",!1)&&!a.nplModal.is_random_source()&&(t.bind("image",this.image),t.bind("npl.init",this.npl_init),t.bind("npl.init.keys",this.npl_init_keys))},npl_init:function(){var n=e("<i/>").addClass("nggpl-toolbar-button-comment fa fa-comment").attr({title:e.nplModal("get_setting","i18n").toggle_social_sidebar}).click(function(e){a.sidebar.toggle(a.sidebars.comments.get_type()),e.preventDefault()});a.thumbnails.register_button(n)},_image_ran_once:!1,image:function(){a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_comments",!1)&&(a.sidebars.comments._image_ran_once?(a.sidebars.comments.load_more(a.galleria.get_current_image_id()),a.sidebar.is_open()&&a.sidebar.get_type()==a.sidebars.comments.get_type()&&a.sidebar.render(a.sidebars.comments.get_type())):(e.nplModal("get_state").sidebar&&e.nplModal("get_state").sidebar==a.sidebars.comments.get_type()||e.nplModal("get_setting","display_comments"))&&!e.nplModal("mobile.browser.any")&&a.sidebar.open(a.sidebars.comments.get_type()),a.sidebars.comments._image_ran_once=!0)},npl_init_keys:function(n){var i=a.galleria.get_keybinding_exclude_list();a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_comments",!1)&&t.attachKeyboard({32:function(){e(document.activeElement).is(i)||a.sidebar.toggle(a.sidebars.comments.get_type())}})}}}},thumbnails:{_aip:!1,_is_open:!0,is_aip:function(e){return"undefined"==typeof e?this._aip:void(this._aip=e)},is_open:function(e){return"undefined"==typeof e?this._is_open:void(this._is_open=e)},toggle:function(){this.is_aip()||(this.is_open()?this.close():this.open(),this.is_aip(!0))},open:function(){t.$("thumbnails-container, dock-toggle-container, info").velocity({bottom:"+="+t.$("thumbnails-container").height()+"px"},{complete:function(){a.thumbnails.is_open(!0),a.thumbnails.is_aip(!1),t.$("container").addClass("npl-thumbnails-open"),e(window).trigger("resize"),t.trigger("npl.thumbnails.opened"),e(".galleria-dock-toggle-container i").toggleClass("fa-angle-up fa-angle-down")}})},close:function(){t.$("thumbnails-container, dock-toggle-container, info").velocity({bottom:"-="+t.$("thumbnails-container").height()+"px"},{complete:function(){a.thumbnails.is_open(!1),a.thumbnails.is_aip(!1),t.$("container").removeClass("npl-thumbnails-open"),e(window).trigger("resize"),t.trigger("npl.thumbnails.closed"),e(".galleria-dock-toggle-container i").toggleClass("fa-angle-up fa-angle-down")}})},adjust_container:function(){var e=t.$("thumbnails-container").height();e+=parseInt(t.$("thumbnails-container").css("bottom")),a.info.is_open()&&(e+=t.$("info").height()),t.$("dock-toggle-container").css({bottom:e+"px",left:t.$("stage").width()/2+"px"})},_buttons:[],register_button:function(n){var i=e('<span class="nggpl-button nggpl-toolbar-button"/>');e.nplModal("get_setting","icon_background_enabled",!1)&&e.nplModal("get_setting","icon_background_rounded",!1)&&i.addClass("nggpl-rounded"),i.html(n),this._buttons.push(i),e(t._dom.stage).append(i)},get_registered_buttons:function(){return this._buttons},events:{bind:function(){t.bind("loadfinish",a.thumbnails.adjust_container),t.bind("loadfinish",this.loadfinish),t.bind("rescale",a.thumbnails.adjust_container),t.bind("npl.sidebar.opened",a.thumbnails.adjust_container),t.bind("npl.sidebar.closed",a.thumbnails.adjust_container),t.bind("npl.init",this.npl_init),t.bind("npl.init.complete",this.npl_init_complete)},npl_init:function(){t.$("container").addClass("npl-thumbnails-open"),t.$("thumbnails-container").css({background:e.nplModal("get_setting","carousel_background_color")});var n=e("<i/>").addClass("fa fa-angle-right").css({color:a.icons.get_color()}),i=e("<i/>").addClass("fa fa-angle-left").css({color:a.icons.get_color()});e(t._dom.stage).append(n),e(t._dom.stage).append(i),t.append({"thumb-nav-left":i}),t.append({"thumb-nav-right":n}),t.addElement("dock-toggle-container");var o=t.$("dock-toggle-container").css({background:e.nplModal("get_setting","carousel_background_color")}),l=e("<i/>").addClass("fa fa-angle-down").css({color:e.nplModal("get_setting","carousel_text_color")});e(t._dom.stage).append(l),t.append({"dock-toggle-container":l}),o.click(t.proxy(function(){a.thumbnails.toggle()}));var s=e("<i/>").addClass("nggpl-toolbar-button-play fa fa-play").attr({title:e.nplModal("get_setting","i18n").play_pause}).click(function(n){n.preventDefault(),t.playToggle(),e(this).toggleClass("fa-play"),e(this).toggleClass("fa-pause")});if(this._playing&&s.removeClass("fa-play").addClass("fa-pause"),a.thumbnails.register_button(s),e.nplModal("get_setting","enable_fullscreen",!1)&&e.nplModal("fullscreen.has_support")&&!e.nplModal("mobile.browser.any")){var r=e("<i/>").addClass("nggpl-toolbar-button-fullscreen fa fa-arrows-alt").attr({title:e.nplModal("get_setting","i18n").toggle_fullsize}).click(function(n){n.preventDefault(),e.nplModal("fullscreen.toggle"),e(this).toggleClass("fa-arrows-alt"),e(this).toggleClass("fa-expand")});a.thumbnails.register_button(r)}var d=e("<i/>").addClass("nggpl-toolbar-button-info fa fa-info").attr({title:e.nplModal("get_setting","i18n").toggle_image_info}).click(t.proxy(function(e){e.preventDefault(),a.info.toggle()}));a.thumbnails.register_button(d)},npl_init_complete:function(){var n=a.thumbnails.get_registered_buttons();for(i=0;i<=n.length-1;i++)n[i].css({color:a.icons.get_color(),"background-color":a.icons.get_background()});t.addElement("nextgen-buttons"),t.append({"nextgen-buttons":n}),t.prependChild("thumbnails-container","nextgen-buttons"),t.appendChild("container","dock-toggle-container"),e.nplModal("mobile.browser.any")||t.addIdleState(t.get("dock-toggle-button"),{opacity:0})},_loadfinish_ran_once:!1,loadfinish:function(){a.thumbnails.events._loadfinish_ran_once||((!e.nplModal("get_setting","display_carousel",!0)||Galleria.IPHONE||Galleria.IPAD||navigator.userAgent.match("CriOS"))&&a.thumbnails.toggle(),a.thumbnails.events._loadfinish_ran_once=!0)}}},info:{_aip:!1,_is_open:!1,is_aip:function(e){return"undefined"==typeof e?this._aip:void(this._aip=e)},is_open:function(e){return"undefined"==typeof e?this._is_open:void(this._is_open=e)},toggle:function(){this.is_aip()||(t.$("info").is(":visible")?this.close():this.open(),this.is_aip(!0))},open:function(){a.info.is_open(!0);var e=t.$("info");e.css({height:"auto"});var n=e.height();e.css({height:"0px",display:"block"}),t.$("dock-toggle-container").velocity({bottom:"+="+n+"px"}),e.velocity({height:n+"px"},{complete:function(){e.css({height:"auto"}),setTimeout(function(){t.$("dock-toggle-container").css({bottom:t.$("container").height()-e.position().top+"px"})},90),t.$("info-text").velocity({opacity:1}),a.info.is_aip(!1),t.trigger("npl.info.opened")}})},close:function(){var e=t.$("info");t.$("info-text").velocity({opacity:0},{duration:"fast"}),t.$("dock-toggle-container").velocity({bottom:"-="+e.height()+"px"}),e.velocity({height:"0px"},{complete:function(){e.css({display:"none",height:"auto"}),a.info.is_open(!1),a.info.is_aip(!1),t.trigger("npl.info.closed")}})},events:{bind:function(){t.bind("npl.init",this.npl_init),t.bind("loadfinish",this.loadfinish)},npl_init:function(){t.prependChild("info-text",e("<div/>").attr("id","galleria-image-share-icons").attr("class","galleria-image-share-icons")),(carousel_text_color=e.nplModal("get_setting","carousel_text_color"))&&(t.$("info-title").css({color:carousel_text_color}),t.$("info-description").css({color:carousel_text_color})),t.$("info, info-text, info-title, info-description").css({background:e.nplModal("get_setting","carousel_background_color")})},_loadfinish_ran_once:!1,loadfinish:function(){t.$("info-title, info-description").find("a").each(function(){e(this).attr("target","_blank"),e(this).css("color",a.icons.get_color())}),e.nplModal("get_setting","display_captions")&&(a.info.events._loadfinish_ran_once||setTimeout(function(){a.info.open()},90)),a.info.events._loadfinish_ran_once=!0}}},icons:{get_color:function(){return e.nplModal("get_setting","icon_color")},get_background:function(){var n=e.nplModal("get_setting","carousel_background_color");return e.nplModal("get_setting","icon_background_enabled",!1)&&(n=e.nplModal("get_setting","icon_background")),n},get_overlay_color:function(){return e.nplModal("get_setting","overlay_icon_color")}},nplModal:{close:function(){e.nplModal("close_modal")},is_random_source:function(){var n=e.nplModal("get_gallery_from_id",e.nplModal("get_state").gallery_id);return e.inArray(n.source,["random","random_images"])!=-1},is_nextgen_gallery:function(){return"!"!=e.nplModal("get_state").gallery_id},is_nextgen_widget:function(){var n=!1,t=e.nplModal("get_gallery_from_id",e.nplModal("get_state").gallery_id),i=t.slug;return i&&(n=i.indexOf("widget-ngg-images")!==-1),n},events:{bind:function(){(Galleria.IPAD||Galleria.IPHONE)&&t.$("container").addClass("nggpl-ios-browser"),a.nplModal.is_nextgen_gallery()&&t.bind("image",this.image),a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_comments",!1)&&e("#npl_content").on("npl.url_handler",this.unhandled_url_change),e.nplModal("get_setting","protect_images",!1)&&(e(".galleria-image").bind("dragstart",function(e){e.preventDefault()}),t.bind("npl.init",this.npl_init),t.bind("npl.init.complete",this.npl_init_complete)),jQuery("#npl_content").bind("npl.closing",this.closing)},npl_init:function(){t.addElement("image-protection"),document.oncontextmenu=function(e){e=e||window.event,e.preventDefault()}},npl_init_complete:function(){t.prependChild("images","image-protection")},_image_ran_once:!1,image:function(){if(a.nplModal.events._image_ran_once&&!a.nplModal.is_random_source()){var n=t.getData(t.getIndex()).image_id,i=a.sidebar.is_open()?"/"+a.sidebar.get_type():"",o=e.nplModal("get_state");o.image_id=n,e.nplModal("set_state",o),e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("router.navigate",e.nplModal("get_setting","router_slug")+"/"+e.nplModal("get_state").slug+"/"+n+i,!0)}a.nplModal.events._image_ran_once=!0},unhandled_url_change:function(n,i){for(var o=0;o<=t.getDataLength()-1;o++)i.image_id==t.getData(o).image_id&&t.show(o);a.sidebar.is_open()&&null==i.sidebar?a.sidebar.close():e.nplModal("mobile.browser.any")||a.sidebar.is_open()||"undefined"==typeof i.sidebar||null===i.sidebar||a.sidebar.open(i.sidebar)},closing:function(e){t.detachKeyboard()}}},galleria:{get_displayed_gallery_setting:function(n,t){var i="",a=e.nplModal("get_gallery_from_id",e.nplModal("get_state").gallery_id);return i=a&&"undefined"!=typeof a.display_settings[n]?a.display_settings[n]:t,1==i&&(i=!0),0==i&&(i=!1),i},get_keybinding_exclude_list:function(){return"textarea, input"},get_current_image_id:function(){return t.getData(t.getIndex()).image_id},get_index_from_id:function(e){for(var n=null,i=0;i<=t.getDataLength()-1;i++)e==t.getData(i).image_id&&(n=i);return n},events:{bind:function(){t.bind("touchmove",this.touchmove),t.bind("npl.init",this.npl_init),t.bind("npl.init.keys",this.npl_init_keys),t.bind("npl.init.complete",this.npl_init_complete),t.bind("loadstart",this.loadstart),t.bind("loadfinish",this.loadfinish),e(window).on("resize orientationchange",this.browserchanged)},browserchanged:function(e){setTimeout(function(){t.rescale()},200)},npl_init:function(){t.setPlaytime(1e3*e.nplModal("get_setting","slideshow_speed",5)),t.$("container").css({background:e.nplModal("get_setting","background_color")});var n=e("<i/>").addClass("fa fa-angle-right").css({color:a.icons.get_overlay_color()}),i=e("<i/>").addClass("fa fa-angle-left").css({color:a.icons.get_overlay_color()});e(t._dom.stage).append(n),e(t._dom.stage).append(i),t.append({"image-nav-left":i}),t.append({"image-nav-right":n}),t.$("counter").css({color:a.icons.get_overlay_color()})},npl_init_keys:function(n){var i=a.galleria.get_keybinding_exclude_list();t.attachKeyboard({left:function(){e(document.activeElement).is(i)||this.prev()},right:function(){e(document.activeElement).is(i)||this.next()},down:function(){e(document.activeElement).is(i)||a.thumbnails.toggle()},up:function(){e(document.activeElement).is(i)||a.info.toggle()},27:function(e){e.preventDefault(),a.nplModal.close()},70:function(){e(document.activeElement).is(i)||e.nplModal("get_setting","enable_fullscreen",!1)&&e.nplModal("fullscreen.has_support")&&e.nplModal("fullscreen.toggle")}})},npl_init_complete:function(){e.nplModal("mobile.browser.any")||(t.addIdleState(t.get("counter"),{opacity:0}),t.addIdleState(t.get("image-nav-left"),{opacity:0}),t.addIdleState(t.get("image-nav-right"),{opacity:0}))},touchmove:function(n){e(".scrollable").has(e(n.target)).length||n.preventDefault()},loadstart:function(n){if(!n.cached){var t=e("#npl_button_close").find("i");t.removeClass("fa-times-circle"),t.addClass("fa-spinner"),t.addClass("fa-spin")}},loadfinish:function(n){var t=e("#npl_button_close").find("i");t.addClass("fa-times-circle"),t.removeClass("fa-spinner"),t.removeClass("fa-spin")}}},share_icons:{strip_html:function(e){var n=document.createElement("div");return n.innerHTML=e,n.textContent||n.innerText||""},create:function(n,i){if(a.nplModal.is_random_source()||a.nplModal.is_nextgen_widget()||!a.nplModal.is_nextgen_gallery()||!e.nplModal("get_setting","enable_routing",!1))return!1;var o=t.getData(t.getIndex()).image_id,l=t.getData(t.getIndex()),s=encodeURIComponent(a.share_icons.get_share_url(o)),r=encodeURIComponent(window.location.toString()),d=a.share_icons.strip_html(l.title),g=a.share_icons.strip_html(l.description),c=e("<li/>").html(e("<a/>",{href:"https://twitter.com/share?url="+a.share_icons.get_share_url(o,"full"),target:"_blank",class:"nggpl-comment-tweet-button",title:e.nplModal("get_setting","i18n").share.twitter}).css({color:i}).html(e("<i/>",{class:"fa fa-twitter-square"}))),p=e("<li/>").html(e("<a/>",{href:"https://plus.google.com/share?url="+s,target:"_blank",class:"nggpl-comment-googlep-button",title:e.nplModal("get_setting","i18n").share.googlep}).css({color:i}).html(e("<i/>",{class:"fa fa-google-plus-square"}))),_="";"undefined"!=typeof e.nplModal("get_setting","facebook_app_id")?(_="https://www.facebook.com/dialog/feed?app_id=",_+=e.nplModal("get_setting","facebook_app_id"),_+="&link="+encodeURIComponent(window.location.toString()),g.length>0&&(_+="&description="+g.trim()),_+="&picture="+l.image.trim(),_+="&redirect_uri="+encodeURIComponent(window.location.toString())):(_="https://www.facebook.com/sharer/sharer.php?s=100",_+="&p[url]="+encodeURIComponent(a.share_icons.get_share_url(o,"full")),d.length>0&&(_+="&p[title]="+d.trim()),g.length>0&&(_+="&p[summary]="+g.trim()),_+="&p[images][0]="+encodeURIComponent(l.image).trim());var u=e("<li/>").html(e("<a/>",{href:_,target:"_blank",class:"nggpl-comment-facebook-button",title:e.nplModal("get_setting","i18n").share.facebook}).css({color:i}).html(e("<i/>",{class:"fa fa-facebook-square"}))),m=encodeURIComponent(a.share_icons.get_share_url(o,"full"));m+="&url="+r,m+="&media="+l.image,m+="&description="+g;var h=e("<li/>").html(e("<a/>",{href:"http://pinterest.com/pin/create/button/?s=100"+m,target:"_blank",class:"nggpl-comment-pinterest-button",title:e.nplModal("get_setting","i18n").share.pinterest}).css({color:i}).html(e("<i/>",{class:"fa fa-pinterest-square"}))),f=[c,p,u,h];n=e(n),n.html("");e("<ul/>").appendTo(n);n.find("ul").append(f)},get_share_url:function(n,t){"undefined"==typeof t&&(t="thumb");var i=e.nplModal("get_state").gallery_id,a=e.nplModal("get_setting","share_url").replace("{gallery_id}",i).replace("{image_id}",n).replace("{named_size}",t),o=e("<a/>").attr("href",e.nplModal("get_setting","wp_site_url"))[0],l=e("<a/>").attr("href",window.location.toString())[0],s=e("<a/>").attr("href",a)[0];return l.pathname.indexOf(o.pathname)>=0&&(l.pathname=l.pathname.substr(o.pathname.length)),l.pathname.indexOf(s.pathname)>=0&&(l.pathname=l.pathname.substr(l.pathname.length)),s.search=l.search,s.search.length>0&&(s.search+="&"),s.search+="uri="+l.pathname,s.href},events:{bind:function(){t.bind("image",this.image)},image:function(){if(a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_sharing",!1)){var n=e.nplModal("get_setting","carousel_text_color")?e.nplModal("get_setting","carousel_text_color"):a.icons.get_color();a.share_icons.create("#galleria-image-share-icons",n)}}}}};a.galleria.events.bind(),a.nplModal.events.bind(),a.thumbnails.events.bind(),a.info.events.bind(),a.share_icons.events.bind(),a.sidebar.events.bind(),a.sidebars.comments.events.bind(),e(t._target).trigger("npl.ready",{galleria_theme:t,methods:a}),t.trigger("npl.init"),t.trigger("npl.init.keys"),t.trigger("npl.init.complete")}})}}(jQuery);